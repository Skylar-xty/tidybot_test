<mujoco model="tidybot_with_kuka">
  <compiler angle="radian" meshdir="assets"/>

  <option integrator="implicitfast"/>
  <option cone="elliptic" impratio="10"/>

  <default>
    <default class="base">
      <default class="base/visual">
        <geom type="mesh" contype="0" conaffinity="0" group="2"/>
      </default>
      <default class="base/collision">
        <geom type="mesh" group="3"/>
      </default>
    </default>

    <default class="iiwa">
      <joint damping="0.5" armature="0.1" limited="true"/>
      <default class="iiwa/visual">
        <geom type="mesh" contype="0" conaffinity="0" group="2"/>
      </default>
      <default class="iiwa/collision">
        <geom type="mesh" group="3"/>
      </default>
    </default>

    <site size="0.001" rgba="0.5 0.5 0.5 0.3" group="4"/>
  </default>

  <asset>
    <material name="black" rgba="0.11372549 0.11372549 0.10196078 1"/>
    <material name="gray" rgba="0.62745098 0.65098039 0.64705882 1"/>
    <material name="dark_gray" rgba="0.35294118 0.37647059 0.37254902 1"/>
    <material name="orange" rgba="1 0.423529 0.0392157 1"/>
    
    <!-- Base meshes -->
    <mesh file="base/bumper.stl"/>
    <mesh file="base/bottom_plate.stl"/>
    <mesh file="base/body.stl"/>
    <mesh file="base/top_plate.stl"/>
    <mesh file="base/arm_plate.stl"/>

    <!-- IIWA7 meshes from output.xml -->
    <mesh name="iiwa_link_0" file="../../../iiwa_description/assets/link_0_001.stl"/>
    <mesh name="iiwa_link_1" file="../../../iiwa_description/assets/link_1_001.stl"/>
    <mesh name="iiwa_link_2" file="../../../iiwa_description/assets/link_2_001.stl"/>
    <mesh name="iiwa_link_3" file="../../../iiwa_description/assets/link_3_001.stl"/>
    <mesh name="iiwa_link_4" file="../../../iiwa_description/assets/link_4_001.stl"/>
    <mesh name="iiwa_link_5" file="../../../iiwa_description/assets/link_5_001.stl"/>
    <mesh name="iiwa_link_6" file="../../../iiwa_description/assets/link_6_001.stl"/>
    <mesh name="iiwa_link_7" file="../../../iiwa_description/assets/link_7_001.stl"/>
  </asset>

  <worldbody>
    <body name="base_link">
      <inertial pos="0 0 0.035" mass="60" diaginertia="0.001 0.001 0.001"/>
      <joint name="joint_x" type="slide" axis="1 0 0"/>
      <joint name="joint_y" type="slide" axis="0 1 0"/>
      <joint name="joint_th"/>
      <geom class="base/visual" mesh="bumper" material="black"/>
      <geom class="base/visual" mesh="bottom_plate" material="dark_gray"/>
      <geom class="base/visual" mesh="body" material="gray"/>
      <geom class="base/visual" mesh="top_plate" material="dark_gray"/>
      <geom class="base/visual" mesh="arm_plate" material="gray"/>
      <geom class="base/collision" mesh="bumper"/>
      <geom class="base/collision" mesh="bottom_plate"/>
      <geom class="base/collision" mesh="body"/>
      <geom class="base/collision" mesh="top_plate"/>
      <geom class="base/collision" mesh="arm_plate"/>
      <camera name="base" pos="0.2525 0 0.335" euler="0 -0.7853981634 -1.5707963268" fovy="52.23384539951277"
        resolution="640 360"/>
      
      <!-- KUKA IIWA7 ARM MOUNTED HERE -->
      <body name="iiwa_link_0" pos="0 0 0.335" childclass="iiwa">
        <inertial pos="-0.1 0 0.07" mass="5" diaginertia="0.05 0.06 0.03"/>
        <geom class="iiwa/visual" mesh="iiwa_link_0" material="gray"/>
        <geom class="iiwa/collision" mesh="iiwa_link_0"/>
        
        <body name="iiwa_link_1" pos="0 0 0.15">
          <inertial pos="0 -0.03 0.12" quat="0.428904 0.562175 -0.562175 0.428904" mass="3.4525" diaginertia="0.0218946 0.02183 0.00663837"/>
          <joint name="iiwa_joint_1" range="-2.96706 2.96706" damping="0.5"/>
          <geom class="iiwa/visual" pos="0 0 0.0075" mesh="iiwa_link_1" material="orange"/>
          <geom class="iiwa/collision" pos="0 0 0.0075" mesh="iiwa_link_1"/>
          
          <body name="iiwa_link_2" pos="0 0 0.19" quat="0 0 0.707107 0.707107">
            <inertial pos="0.0003 0.059 0.042" quat="0.701371 0.0898824 0.0898824 0.701371" mass="3.4821" diaginertia="0.02179 0.0217049 0.00684512"/>
            <joint name="iiwa_joint_2" range="-2.0944 2.0944" damping="0.5"/>
            <geom class="iiwa/visual" mesh="iiwa_link_2" material="orange"/>
            <geom class="iiwa/collision" mesh="iiwa_link_2"/>
            
            <body name="iiwa_link_3" pos="0 0.21 0" quat="0 0 0.707107 0.707107">
              <inertial pos="0 0.03 0.13" quat="0.56292 0.427927 -0.427927 0.56292" mass="4.05623" diaginertia="0.0321488 0.03204 0.00799117"/>
              <joint name="iiwa_joint_3" range="-2.96706 2.96706" damping="0.5"/>
              <geom class="iiwa/visual" pos="0 0 -0.026" mesh="iiwa_link_3" material="orange"/>
              <geom class="iiwa/collision" pos="0 0 -0.026" mesh="iiwa_link_3"/>
              
              <body name="iiwa_link_4" pos="0 0 0.19" quat="0.707107 0.707107 0 0">
                <inertial pos="0 0.067 0.034" quat="0.991887 -0.127124 0 0" mass="3.4822" diaginertia="0.02178 0.0216947 0.00684029"/>
                <joint name="iiwa_joint_4" range="-2.0944 2.0944" damping="0.5"/>
                <geom class="iiwa/visual" mesh="iiwa_link_4" material="orange"/>
                <geom class="iiwa/collision" mesh="iiwa_link_4"/>
                
                <body name="iiwa_link_5" pos="0 0.21 0" quat="0 0 0.707107 0.707107">
                  <inertial pos="0.0001 0.021 0.076" quat="0.365352 0.605407 -0.605407 0.365352" mass="2.1633" diaginertia="0.0131987 0.01287 0.0036293"/>
                  <joint name="iiwa_joint_5" range="-2.96706 2.96706" damping="0.5"/>
                  <geom class="iiwa/visual" pos="0 0 -0.026" mesh="iiwa_link_5" material="orange"/>
                  <geom class="iiwa/collision" pos="0 0 -0.026" mesh="iiwa_link_5"/>
                  
                  <body name="iiwa_link_6" pos="0 0.0607 0.19" quat="0.707107 0.707107 0 0">
                    <inertial pos="0 0.0006 0.0004" quat="0.996112 0.088097 0 0" mass="2.3466" diaginertia="0.006509 0.00631585 0.00447015"/>
                    <joint name="iiwa_joint_6" range="-2.0944 2.0944" damping="0.5"/>
                    <geom class="iiwa/visual" mesh="iiwa_link_6" material="orange"/>
                    <geom class="iiwa/collision" mesh="iiwa_link_6"/>
                    
                    <body name="iiwa_link_7" pos="0 0.081 0.0607" quat="0 0 0.707107 0.707107">
                      <inertial pos="0 0 0.02" quat="0.923068 0 0 0.384636" mass="3.129" diaginertia="0.0152362 0.0140538 0.002872"/>
                      <joint name="iiwa_joint_7" range="-3.05433 3.05433" damping="0.5"/>
                      <geom class="iiwa/visual" pos="0 0 -0.0005" mesh="iiwa_link_7" material="gray"/>
                      <geom class="iiwa/collision" pos="0 0 -0.0005" mesh="iiwa_link_7"/>
                      
                      <body name="iiwa_link_ee" pos="0 0 0.045">
                        <site name="iiwa_ee_site"/>
                      </body>
                    </body>
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <actuator>
    <position name="joint_x" joint="joint_x" kp="1000000" kv="50000"/>
    <position name="joint_y" joint="joint_y" kp="1000000" kv="50000"/>
    <position name="joint_th" joint="joint_th" kp="50000" kv="1000"/>
    <position name="iiwa_joint_1" joint="iiwa_joint_1" kp="300" kv="30" forcerange="-300 300"/>
    <position name="iiwa_joint_2" joint="iiwa_joint_2" kp="300" kv="30" forcerange="-300 300"/>
    <position name="iiwa_joint_3" joint="iiwa_joint_3" kp="300" kv="30" forcerange="-300 300"/>
    <position name="iiwa_joint_4" joint="iiwa_joint_4" kp="300" kv="30" forcerange="-300 300"/>
    <position name="iiwa_joint_5" joint="iiwa_joint_5" kp="300" kv="30" forcerange="-300 300"/>
    <position name="iiwa_joint_6" joint="iiwa_joint_6" kp="300" kv="30" forcerange="-300 300"/>
    <position name="iiwa_joint_7" joint="iiwa_joint_7" kp="300" kv="30" forcerange="-300 300"/>
  </actuator>

  <keyframe>
    <key name="home" qpos="0 0 0 0 0 0 0 0 0 0" ctrl="0 0 0 0 0 0 0 0 0 0"/>
  </keyframe>
</mujoco>
